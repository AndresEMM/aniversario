<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Camino de medianoche</title>
<style>
  :root{
    --skyTop:#0b1022;
    --skyMid:#131a38;
    --skyBot:#171b2a;
    --moon:#f1f3f6;
    --mount:#1c213b;
    --forest:#0e1326;
    --path:#3b2d1f;
    --pathEdge:#2b221a;
    --grass:#0b0f1c;
    --witch:#0a0a0e;
    --firefly:#ffd36b;
    --fog:#c7d2fe22;
    --halo:#ffefc1;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;overflow:hidden;background:linear-gradient(180deg,var(--skyTop),var(--skyMid) 55%,var(--skyBot))}
  body{font-family: system-ui, Segoe UI, sans-serif;color:#e6e6f0}

  /* Escena */
  .scene{position:relative;width:100%;height:100%}
  .layer{position:absolute;inset:0;pointer-events:none}

  /* Cielo: estrellas */
  .stars{background:
    radial-gradient(1px 1px at 15% 20%, #fff8 50%, transparent 52%),
    radial-gradient(1px 1px at 40% 10%, #fff6 50%, transparent 52%),
    radial-gradient(1px 1px at 70% 25%, #fffc 50%, transparent 52%),
    radial-gradient(1px 1px at 85% 38%, #fff7 50%, transparent 52%),
    radial-gradient(1px 1px at 30% 60%, #fff6 50%, transparent 52%),
    radial-gradient(1px 1px at 60% 70%, #fff7 50%, transparent 52%),
    radial-gradient(1px 1px at 80% 80%, #fff5 50%, transparent 52%)
  }
  @keyframes twinkle{0%,100%{opacity:.9}50%{opacity:.6}}
  .stars{animation: twinkle 6s ease-in-out infinite}

  /* Luna */
  .moon{
    position:absolute;top:6vh;left:8vw;width:110px;height:110px;border-radius:50%;
    background:radial-gradient(120px 100px at 35% 35%, var(--moon),#e4e7ee 50%, #cfd3de 65%, #a8afc0 85%, #7f879c);
    box-shadow:0 0 35px 6px #e9eef777;
    filter:contrast(1.05) brightness(1.03)
  }

  /* Capas de fondo */
  .mountains svg,.forest svg{width:120%;height:100%;position:absolute;left:-10%}
  .mountains path{fill:var(--mount)}
  .forest path{fill:var(--forest)}
  @keyframes driftSlow{from{transform:translateX(0)}to{transform:translateX(-6%)}}
  @keyframes driftMid {from{transform:translateX(0)}to{transform:translateX(-12%)}}
  .mountains{animation: driftSlow 30s linear infinite alternate}
  .forest{animation: driftMid 18s linear infinite alternate}

  /* Sendero y bordes (parallax más rápido) */
  .ground{position:absolute;inset:0;display:flex;align-items:flex-end}
  .path{
    position:relative;margin:0 auto;width:56vw;max-width:900px;min-width:320px;height:60vh;
    background:linear-gradient(180deg, #4a3a29 0%, var(--path) 50%, #20170f 100%);
    clip-path:polygon(50% 0%, 70% 10%, 82% 20%, 88% 32%, 92% 45%, 95% 60%, 97% 75%, 98% 88%, 99% 100%,
                      1% 100%, 2% 88%, 3% 75%, 5% 60%, 8% 45%, 12% 32%, 18% 20%, 30% 10%);
    border-left:6px solid var(--pathEdge);border-right:6px solid var(--pathEdge);
    animation: pathFlow 6s linear infinite
  }
  @keyframes pathFlow{
    0%{filter:brightness(1)}50%{filter:brightness(1.03)}100%{filter:brightness(1)}
  }

  .grass{
    position:absolute;inset:auto 0 0 0;height:18vh;background:
      repeating-linear-gradient(0deg, transparent 0 10px, #0000 10px 20px),
      radial-gradient(60px 8px at 10% 80%, #0f1628 40%, transparent 50%),
      radial-gradient(60px 8px at 30% 85%, #0c1221 40%, transparent 50%),
      radial-gradient(60px 8px at 55% 78%, #0f1628 40%, transparent 50%),
      radial-gradient(60px 8px at 75% 86%, #0c1221 40%, transparent 50%),
      linear-gradient(180deg, var(--grass), #060913);
    z-index:3;
    overflow:hidden
  }
  .grass::before,.grass::after{
    content:"";position:absolute;inset:0;background:
      repeating-linear-gradient(90deg, #0e1425 0 22px, #0b1120 22px 44px);
    opacity:.08;animation: slideGrass 5s linear infinite
  }
  .grass::after{animation-duration:8s;opacity:.05}
  @keyframes slideGrass{from{transform:translateX(0)}to{transform:translateX(-80px)}}

  /* Niebla baja */
  .fog{position:absolute;inset:auto 0 12vh 0;height:28vh;z-index:2;overflow:hidden}
  .fog::before,.fog::after{
    content:"";position:absolute;left:-30%;right:-30%;top:10%;
    height:110%;background:radial-gradient(40% 60% at 50% 50%, var(--fog), transparent 70%);
    animation: fogMove 24s linear infinite
  }
  .fog::after{animation-duration:34s;top:0%}
  @keyframes fogMove{from{transform:translateX(0)}to{transform:translateX(20%)}}

  /* Luciérnagas */
  .fireflies{pointer-events:none}
  .fly{position:absolute;width:4px;height:4px;border-radius:50%;background:var(--firefly);
       box-shadow:0 0 6px 2px var(--firefly);opacity:.85;filter:saturate(1.1)}
  @keyframes fire{0%,100%{transform:translate(0,0)}25%{transform:translate(10px,-8px)}50%{transform:translate(-4px,-2px)}75%{transform:translate(6px,10px)}}
  @keyframes glow{0%,100%{opacity:.9}50%{opacity:.4}}

  /* Bruja (SVG silueta) */
  .witch{
    position:absolute;left:50%;bottom:19vh;transform:translateX(-50%);
    width:min(22vw, 220px);z-index:4;pointer-events:none
  }
  .walk{animation: bob 1.6s ease-in-out infinite}
  @keyframes bob{0%,100%{transform:translate(-50%,0)}50%{transform:translate(-50%,-4px)}}
  .cape{transform-origin: 50% 20%;animation: flutter 2.8s ease-in-out infinite}
  @keyframes flutter{0%,100%{transform:skewX(0)}50%{transform:skewX(-5deg)}}

  /* Linterna (halo que sigue al cursor, clic para activar) */
  .halo{
    position:fixed;inset:0;pointer-events:none;opacity:0;transition:opacity .25s ease;mix-blend-mode:screen
  }
  .halo.active{opacity:1}
  .halo::before{
    content:"";position:absolute;left:var(--x,50%);top:var(--y,60%);
    transform:translate(-50%,-50%);
    width:36vmax;height:36vmax;border-radius:50%;
    background:radial-gradient(closest-side, var(--halo) 0%, #ffe9a000 60%);
    filter:blur(1px) brightness(1.05);
  }

  /* Texto opcional */
  .caption{
    position:absolute;bottom:3vh;width:100%;text-align:center;font-size:clamp(.9rem,1.8vw,1.1rem);
    color:#cbd5ffcc;letter-spacing:.3px
  }

  /* Botón linterna */
  .toggle{
    position:fixed;right:14px;top:14px;z-index:10;border:1px solid #ffffff22;border-radius:999px;
    background:#0b1022aa;color:#fff;padding:.5rem .8rem;font-weight:600;backdrop-filter:blur(6px);
    cursor:pointer
  }
  .toggle:active{transform:translateY(1px)}
</style>
</head>
<body>
<button class="toggle" id="toggle">Linterna: Apagar/Encender</button>

<div class="scene">
  <div class="layer stars"></div>
  <div class="layer moon"></div>

  <!-- Montañas -->
  <div class="layer mountains" aria-hidden="true">
    <svg viewBox="0 0 1200 600" preserveAspectRatio="none">
      <path d="M0,420 L120,360 240,410 360,300 480,380 600,320 720,360 840,290 960,350 1080,310 1200,360 1200,600 0,600 Z"/>
    </svg>
  </div>

  <!-- Bosque -->
  <div class="layer forest" aria-hidden="true">
    <svg viewBox="0 0 1200 600" preserveAspectRatio="none">
      <path d="M0,470 
               C60,430 80,430 120,470
               C160,430 180,430 220,470
               C260,430 280,430 320,470
               C360,430 380,430 420,470
               C460,430 480,430 520,470
               C560,430 580,430 620,470
               C660,430 680,430 720,470
               C760,430 780,430 820,470
               C860,430 880,430 920,470
               C960,430 980,430 1020,470
               C1060,430 1080,430 1120,470
               L1200,600 0,600 Z"/>
    </svg>
  </div>

  <!-- Niebla baja -->
  <div class="layer fog"></div>

  <!-- Sendero y hierba -->
  <div class="layer ground">
    <div class="path"></div>
    <div class="grass"></div>
  </div>

  <!-- Bruja (silueta) -->
  <svg class="witch walk" viewBox="0 0 200 260" aria-label="Chica bruja caminando">
    <!-- Sombrero -->
    <path d="M110 62 Q90 56 60 60 Q100 50 126 36 Q128 45 125 55 Q140 62 160 66 Q128 68 110 62 Z" fill="var(--witch)"/>
    <!-- Cabeza -->
    <circle cx="115" cy="78" r="16" fill="var(--witch)"/>
    <!-- Cabello/velo -->
    <path d="M98 88 Q92 110 96 126 Q104 134 120 134 Q125 118 124 98 Z" fill="var(--witch)"/>
    <!-- Cuerpo/vestido -->
    <path d="M92 130 L138 130 L160 210 Q122 228 78 210 Z" fill="var(--witch)"/>
    <!-- Capa -->
    <path class="cape" d="M92 130 Q70 150 54 182 Q70 178 92 186 Q82 166 92 130 Z" fill="var(--witch)"/>
    <!-- Brazos (sutil) -->
    <path d="M138 130 Q150 150 152 170" stroke="var(--witch)" stroke-width="10" stroke-linecap="round"/>
    <path d="M92 130 Q80 150 78 170" stroke="var(--witch)" stroke-width="10" stroke-linecap="round"/>
    <!-- Piernas (silueta simple) -->
    <path d="M108 210 Q110 235 110 252" stroke="var(--witch)" stroke-width="12" stroke-linecap="round"/>
    <path d="M132 210 Q134 235 134 252" stroke="var(--witch)" stroke-width="12" stroke-linecap="round"/>
  </svg>

  <!-- Luciérnagas -->
  <div class="layer fireflies" id="flies"></div>

  <!-- Halo de linterna -->
  <div class="halo" id="halo"></div>

  <div class="caption">“Entre pinos y estrellas, seguimos el mismo camino.”</div>
</div>

<script>
  // Luciérnagas aleatorias
  const flies = document.getElementById('flies');
  const COUNT = 22;
  for(let i=0;i<COUNT;i++){
    const d = document.createElement('div');
    d.className = 'fly';
    const x = Math.random()*100, y = 40 + Math.random()*55;
    d.style.left = x + 'vw';
    d.style.top  = y + 'vh';
    d.style.animation = `fire ${6+Math.random()*6}s ease-in-out ${Math.random()*2}s infinite, glow ${2+Math.random()*2}s ease-in-out ${Math.random()}s infinite`;
    flies.appendChild(d);
  }

  // Linterna: seguir cursor / toque
  const halo = document.getElementById('halo');
  const toggle = document.getElementById('toggle');
  let on = false;
  function setPos(e){
    if(!on) return;
    const p = e.touches ? e.touches[0] : e;
    halo.style.setProperty('--x', p.clientX + 'px');
    halo.style.setProperty('--y', p.clientY + 'px');
  }
  ['mousemove','touchmove'].forEach(ev=>window.addEventListener(ev,setPos,{passive:true}));
  toggle.addEventListener('click', ()=>{ on = !on; halo.classList.toggle('active', on); });

  // Pequeño parallax al mover (suave)
  let targetX = 0, targetY = 0, cx=0, cy=0;
  window.addEventListener('mousemove', (e)=>{
    targetX = (e.clientX / innerWidth - .5);
    targetY = (e.clientY / innerHeight - .5);
  });
  function parallax(){
    cx += (targetX - cx)*0.04;
    cy += (targetY - cy)*0.04;
    document.querySelector('.mountains').style.transform = `translate(${cx*10}px, ${cy*4}px)`;
    document.querySelector('.forest').style.transform = `translate(${cx*18}px, ${cy*6}px)`;
    requestAnimationFrame(parallax);
  }
  parallax();
</script>
</body>
</html>
